(function(a,b){var c=this;!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b(require,exports,module):a.Tether=b()}(this,function(a,b,c){return function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t={}.hasOwnProperty,u=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},v=[].slice;null==this.Tether&&(this.Tether={modules:[]}),l=function(a){var b,c,d,e,f;if(c=getComputedStyle(a).position,"fixed"===c)return a;for(d=void 0,b=a;b=b.parentNode;){try{e=getComputedStyle(b)}catch(g){}if(null==e)return b;if(/(auto|scroll)/.test(e.overflow+e.overflowY+e.overflowX)&&("absolute"!==c||"relative"===(f=e.position)||"absolute"===f||"fixed"===f))return b}return document.body},q=function(){var a;return a=0,function(){return a++}}(),s={},j=function(a){var b,d,f,g,h;if(f=a._tetherZeroElement,null==f&&(f=a.createElement("div"),f.setAttribute("data-tether-id",q()),e(f.style,{top:0,left:0,position:"absolute"}),a.body.appendChild(f),a._tetherZeroElement=f),b=f.getAttribute("data-tether-id"),null==s[b]){s[b]={},h=f.getBoundingClientRect();for(d in h)g=h[d],s[b][d]=g;c(function(){return s[b]=void 0})}return s[b]},n=null,g=function(a){var b,c,d,e,f,g,h;a===document?(c=document,a=document.documentElement):c=a.ownerDocument,d=c.documentElement,b={},h=a.getBoundingClientRect();for(e in h)g=h[e],b[e]=g;return f=j(c),b.top-=f.top,b.left-=f.left,null==b.width&&(b.width=document.body.scrollWidth-b.left-b.right),null==b.height&&(b.height=document.body.scrollHeight-b.top-b.bottom),b.top=b.top-d.clientTop,b.left=b.left-d.clientLeft,b.right=c.body.clientWidth-b.width-b.left,b.bottom=c.body.clientHeight-b.height-b.top,b},i=function(a){return a.offsetParent||document.documentElement},k=function(){var a,b,c,d,f;return a=document.createElement("div"),a.style.width="100%",a.style.height="200px",b=document.createElement("div"),e(b.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),b.appendChild(a),document.body.appendChild(b),d=a.offsetWidth,b.style.overflow="scroll",f=a.offsetWidth,d===f&&(f=b.clientWidth),document.body.removeChild(b),c=d-f,{width:c,height:c}},e=function(a){var b,c,d,e,f,g,h;for(null==a&&(a={}),b=[],Array.prototype.push.apply(b,arguments),h=b.slice(1),f=0,g=h.length;g>f;f++)if(d=h[f])for(c in d)t.call(d,c)&&(e=d[c],a[c]=e);return a},o=function(a,b){var c,d,e,f,g,i;if(null!=a.classList){for(g=b.split(" "),i=[],e=0,f=g.length;f>e;e++)d=g[e],d.trim()&&i.push(a.classList.remove(d));return i}return c=h(a).replace(new RegExp("(^| )"+b.split(" ").join("|")+"( |$)","gi")," "),p(a,c)},b=function(a,b){var c,d,e,f,g;if(null!=a.classList){for(f=b.split(" "),g=[],d=0,e=f.length;e>d;d++)c=f[d],c.trim()&&g.push(a.classList.add(c));return g}return o(a,b),c=h(a)+(" "+b),p(a,c)},m=function(a,b){return null!=a.classList?a.classList.contains(b):new RegExp("(^| )"+b+"( |$)","gi").test(h(a))},h=function(a){return a.className instanceof SVGAnimatedString?a.className.baseVal:a.className},p=function(a,b){return a.setAttribute("class",b)},r=function(a,c,d){var e,f,g,h,i,j;for(f=0,h=d.length;h>f;f++)e=d[f],u.call(c,e)<0&&m(a,e)&&o(a,e);for(j=[],g=0,i=c.length;i>g;g++)e=c[g],j.push(m(a,e)?void 0:b(a,e));return j},d=[],c=function(a){return d.push(a)},f=function(){var a,b;for(b=[];a=d.pop();)b.push(a());return b},a=function(){function a(){}return a.prototype.on=function(a,b,c,d){var e;return null==d&&(d=!1),null==this.bindings&&(this.bindings={}),null==(e=this.bindings)[a]&&(e[a]=[]),this.bindings[a].push({handler:b,ctx:c,once:d})},a.prototype.once=function(a,b,c){return this.on(a,b,c,!0)},a.prototype.off=function(a,b){var c,d,e;if(null!=(null!=(d=this.bindings)?d[a]:void 0)){if(null==b)return delete this.bindings[a];for(c=0,e=[];c<this.bindings[a].length;)e.push(this.bindings[a][c].handler===b?this.bindings[a].splice(c,1):c++);return e}},a.prototype.trigger=function(){var a,b,c,d,e,f,g,h,i;if(c=arguments[0],a=2<=arguments.length?v.call(arguments,1):[],null!=(g=this.bindings)?g[c]:void 0){for(e=0,i=[];e<this.bindings[c].length;)h=this.bindings[c][e],d=h.handler,b=h.ctx,f=h.once,d.apply(null!=b?b:this,a),i.push(f?this.bindings[c].splice(e,1):e++);return i}},a}(),this.Tether.Utils={getScrollParent:l,getBounds:g,getOffsetParent:i,extend:e,addClass:b,removeClass:o,hasClass:m,updateClasses:r,defer:c,flush:f,uniqueId:q,Evented:a,getScrollBarSize:k}}.call(this),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=[].slice,E=function(a,b){return function(){return a.apply(b,arguments)}};if(null==this.Tether)throw new Error("You must include the utils.js file before tether.js");d=this.Tether,C=d.Utils,p=C.getScrollParent,q=C.getSize,n=C.getOuterSize,l=C.getBounds,m=C.getOffsetParent,j=C.extend,e=C.addClass,w=C.removeClass,z=C.updateClasses,i=C.defer,k=C.flush,o=C.getScrollBarSize,A=function(a,b,c){return null==c&&(c=1),a+c>=b&&b>=a-c},y=function(){var a,b,c,d,e;for(a=document.createElement("div"),e=["transform","webkitTransform","OTransform","MozTransform","msTransform"],c=0,d=e.length;d>c;c++)if(b=e[c],void 0!==a.style[b])return b}(),x=[],v=function(){var a,b,c;for(b=0,c=x.length;c>b;b++)a=x[b],a.position(!1);return k()},r=function(){var a;return null!=(a="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?a:+new Date},function(){var a,b,c,d,e,f,g,h,i;for(b=null,c=null,d=null,e=function(){return null!=c&&c>16?(c=Math.min(c-16,250),void(d=setTimeout(e,250))):null!=b&&r()-b<10?void 0:(null!=d&&(clearTimeout(d),d=null),b=r(),v(),c=r()-b)},h=["resize","scroll","touchmove"],i=[],f=0,g=h.length;g>f;f++)a=h[f],i.push(window.addEventListener(a,e));return i}(),a={center:"center",left:"right",right:"left"},b={middle:"middle",top:"bottom",bottom:"top"},c={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},h=function(c,d){var e,f;return e=c.left,f=c.top,"auto"===e&&(e=a[d.left]),"auto"===f&&(f=b[d.top]),{left:e,top:f}},g=function(a){var b,d;return{left:null!=(b=c[a.left])?b:a.left,top:null!=(d=c[a.top])?d:a.top}},f=function(){var a,b,c,d,e,f,g;for(b=1<=arguments.length?D.call(arguments,0):[],c={top:0,left:0},e=0,f=b.length;f>e;e++)g=b[e],d=g.top,a=g.left,"string"==typeof d&&(d=parseFloat(d,10)),"string"==typeof a&&(a=parseFloat(a,10)),c.top+=d,c.left+=a;return c},s=function(a,b){return"string"==typeof a.left&&-1!==a.left.indexOf("%")&&(a.left=parseFloat(a.left,10)/100*b.width),"string"==typeof a.top&&-1!==a.top.indexOf("%")&&(a.top=parseFloat(a.top,10)/100*b.height),a},t=u=function(a){var b,c,d;return d=a.split(" "),c=d[0],b=d[1],{top:c,left:b}},B=function(){function a(a){this.position=E(this.position,this);var b,c,e,f,g;for(x.push(this),this.history=[],this.setOptions(a,!1),f=d.modules,c=0,e=f.length;e>c;c++)b=f[c],null!=(g=b.initialize)&&g.call(this);this.position()}return a.modules=[],a.prototype.getClass=function(a){var b,c;return(null!=(b=this.options.classes)?b[a]:void 0)?this.options.classes[a]:(null!=(c=this.options.classes)?c[a]:void 0)!==!1?this.options.classPrefix?""+this.options.classPrefix+"-"+a:a:""},a.prototype.setOptions=function(a,b){var c,d,f,g,h,i;for(this.options=a,null==b&&(b=!0),c={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},this.options=j(c,this.options),h=this.options,this.element=h.element,this.target=h.target,this.targetModifier=h.targetModifier,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),i=["element","target"],f=0,g=i.length;g>f;f++){if(d=i[f],null==this[d])throw new Error("Tether Error: Both element and target must be defined");null!=this[d].jquery?this[d]=this[d][0]:"string"==typeof this[d]&&(this[d]=document.querySelector(this[d]))}if(e(this.element,this.getClass("element")),e(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");return this.targetAttachment=t(this.options.targetAttachment),this.attachment=t(this.options.attachment),this.offset=u(this.options.offset),this.targetOffset=u(this.options.targetOffset),null!=this.scrollParent&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParent=this.target:this.scrollParent=p(this.target),this.options.enabled!==!1?this.enable(b):void 0},a.prototype.getTargetBounds=function(){var a,b,c,d,e,f,g,h,i;if(null==this.targetModifier)return l(this.target);switch(this.targetModifier){case"visible":return this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:(a=l(this.target),e={height:a.height,width:a.width,top:a.top,left:a.left},e.height=Math.min(e.height,a.height-(pageYOffset-a.top)),e.height=Math.min(e.height,a.height-(a.top+a.height-(pageYOffset+innerHeight))),e.height=Math.min(innerHeight,e.height),e.height-=2,e.width=Math.min(e.width,a.width-(pageXOffset-a.left)),e.width=Math.min(e.width,a.width-(a.left+a.width-(pageXOffset+innerWidth))),e.width=Math.min(innerWidth,e.width),e.width-=2,e.top<pageYOffset&&(e.top=pageYOffset),e.left<pageXOffset&&(e.left=pageXOffset),e);case"scroll-handle":return i=this.target,i===document.body?(i=document.documentElement,a={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):a=l(i),h=getComputedStyle(i),c=i.scrollWidth>i.clientWidth||"scroll"===[h.overflow,h.overflowX]||this.target!==document.body,f=0,c&&(f=15),d=a.height-parseFloat(h.borderTopWidth)-parseFloat(h.borderBottomWidth)-f,e={width:15,height:.975*d*(d/i.scrollHeight),left:a.left+a.width-parseFloat(h.borderLeftWidth)-15},b=0,408>d&&this.target===document.body&&(b=-11e-5*Math.pow(d,2)-.00727*d+22.58),this.target!==document.body&&(e.height=Math.max(e.height,24)),g=this.target.scrollTop/(i.scrollHeight-d),e.top=g*(d-e.height-b)+a.top+parseFloat(h.borderTopWidth),this.target===document.body&&(e.height=Math.max(e.height,24)),e}},a.prototype.clearCache=function(){return this._cache={}},a.prototype.cache=function(a,b){return null==this._cache&&(this._cache={}),null==this._cache[a]&&(this._cache[a]=b.call(this)),this._cache[a]},a.prototype.enable=function(a){return null==a&&(a=!0),e(this.target,this.getClass("enabled")),e(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParent!==document&&this.scrollParent.addEventListener("scroll",this.position),a?this.position():void 0},a.prototype.disable=function(){return w(this.target,this.getClass("enabled")),w(this.element,this.getClass("enabled")),this.enabled=!1,null!=this.scrollParent?this.scrollParent.removeEventListener("scroll",this.position):void 0},a.prototype.destroy=function(){var a,b,c,d,e;for(this.disable(),e=[],a=c=0,d=x.length;d>c;a=++c){if(b=x[a],b===this){x.splice(a,1);break}e.push(void 0)}return e},a.prototype.updateAttachClasses=function(a,b){var c,d,e,f,g,h,j,k,l,m=this;for(null==a&&(a=this.attachment),null==b&&(b=this.targetAttachment),f=["left","top","bottom","right","middle","center"],(null!=(l=this._addAttachClasses)?l.length:void 0)&&this._addAttachClasses.splice(0,this._addAttachClasses.length),c=null!=this._addAttachClasses?this._addAttachClasses:this._addAttachClasses=[],a.top&&c.push(""+this.getClass("element-attached")+"-"+a.top),a.left&&c.push(""+this.getClass("element-attached")+"-"+a.left),b.top&&c.push(""+this.getClass("target-attached")+"-"+b.top),b.left&&c.push(""+this.getClass("target-attached")+"-"+b.left),d=[],g=0,j=f.length;j>g;g++)e=f[g],d.push(""+this.getClass("element-attached")+"-"+e);for(h=0,k=f.length;k>h;h++)e=f[h],d.push(""+this.getClass("target-attached")+"-"+e);return i(function(){return null!=m._addAttachClasses?(z(m.element,m._addAttachClasses,d),z(m.target,m._addAttachClasses,d),m._addAttachClasses=void 0):void 0})},a.prototype.position=function(a){var b,c,e,i,j,n,p,q,r,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T=this;if(null==a&&(a=!0),this.enabled){for(this.clearCache(),D=h(this.targetAttachment,this.attachment),this.updateAttachClasses(this.attachment,D),b=this.cache("element-bounds",function(){return l(T.element)}),I=b.width,e=b.height,0===I&&0===e&&null!=this.lastSize?(N=this.lastSize,I=N.width,e=N.height):this.lastSize={width:I,height:e},G=F=this.cache("target-bounds",function(){return T.getTargetBounds()}),r=s(g(this.attachment),{width:I,height:e}),E=s(g(D),G),j=s(this.offset,{width:I,height:e}),n=s(this.targetOffset,G),r=f(r,j),E=f(E,n),i=F.left+E.left-r.left,H=F.top+E.top-r.top,O=d.modules,J=0,L=O.length;L>J;J++){if(p=O[J],y=p.position.call(this,{left:i,top:H,targetAttachment:D,targetPos:F,attachment:this.attachment,elementPos:b,offset:r,targetOffset:E,manualOffset:j,manualTargetOffset:n,scrollbarSize:B}),y===!1)return!1;null!=y&&"object"==typeof y&&(H=y.top,i=y.left)}if(q={page:{top:H,left:i},viewport:{top:H-pageYOffset,bottom:pageYOffset-H-e+innerHeight,left:i-pageXOffset,right:pageXOffset-i-I+innerWidth}},document.body.scrollWidth>window.innerWidth&&(B=this.cache("scrollbar-size",o),q.viewport.bottom-=B.height),document.body.scrollHeight>window.innerHeight&&(B=this.cache("scrollbar-size",o),q.viewport.right-=B.width),(""!==(P=document.body.style.position)&&"static"!==P||""!==(Q=document.body.parentElement.style.position)&&"static"!==Q)&&(q.page.bottom=document.body.scrollHeight-H-e,q.page.right=document.body.scrollWidth-i-I),(null!=(R=this.options.optimizations)?R.moveElement:void 0)!==!1&&null==this.targetModifier){for(u=this.cache("target-offsetparent",function(){return m(T.target)}),x=this.cache("target-offsetparent-bounds",function(){return l(u)}),w=getComputedStyle(u),c=getComputedStyle(this.element),v=x,t={},S=["Top","Left","Bottom","Right"],K=0,M=S.length;M>K;K++)C=S[K],t[C.toLowerCase()]=parseFloat(w["border"+C+"Width"]);x.right=document.body.scrollWidth-x.left-v.width+t.right,x.bottom=document.body.scrollHeight-x.top-v.height+t.bottom,q.page.top>=x.top+t.top&&q.page.bottom>=x.bottom&&q.page.left>=x.left+t.left&&q.page.right>=x.right&&(A=u.scrollTop,z=u.scrollLeft,q.offset={top:q.page.top-x.top+A-t.top,left:q.page.left-x.left+z-t.left})}return this.move(q),this.history.unshift(q),this.history.length>3&&this.history.pop(),a&&k(),!0}},a.prototype.move=function(a){var b,c,d,e,f,g,h,k,l,n,o,p,q,r,s,t,u,v=this;if(null!=this.element.parentNode){k={};for(n in a){k[n]={};for(e in a[n]){for(d=!1,t=this.history,r=0,s=t.length;s>r;r++)if(h=t[r],!A(null!=(u=h[n])?u[e]:void 0,a[n][e])){d=!0;break}d||(k[n][e]=!0)}}b={top:"",left:"",right:"",bottom:""},l=function(a,c){var d,e,f;return(null!=(f=v.options.optimizations)?f.gpu:void 0)===!1?(a.top?b.top=""+c.top+"px":b.bottom=""+c.bottom+"px",a.left?b.left=""+c.left+"px":b.right=""+c.right+"px"):(a.top?(b.top=0,e=c.top):(b.bottom=0,e=-c.bottom),a.left?(b.left=0,d=c.left):(b.right=0,d=-c.right),b[y]="translateX("+Math.round(d)+"px) translateY("+Math.round(e)+"px)","msTransform"!==y?b[y]+=" translateZ(0)":void 0)},f=!1,(k.page.top||k.page.bottom)&&(k.page.left||k.page.right)?(b.position="absolute",l(k.page,a.page)):(k.viewport.top||k.viewport.bottom)&&(k.viewport.left||k.viewport.right)?(b.position="fixed",l(k.viewport,a.viewport)):null!=k.offset&&k.offset.top&&k.offset.left?(b.position="absolute",g=this.cache("target-offsetparent",function(){return m(v.target)}),m(this.element)!==g&&i(function(){return v.element.parentNode.removeChild(v.element),g.appendChild(v.element)}),l(k.offset,a.offset),f=!0):(b.position="absolute",l({top:!0,left:!0},a.page)),f||"BODY"===this.element.parentNode.tagName||(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element)),q={},p=!1;for(e in b)o=b[e],c=this.element.style[e],""===c||""===o||"top"!==e&&"left"!==e&&"bottom"!==e&&"right"!==e||(c=parseFloat(c),o=parseFloat(o)),c!==o&&(p=!0,q[e]=b[e]);return p?i(function(){return j(v.element.style,q)}):void 0}},a}(),d.position=v,this.Tether=j(B,d)}.call(this),function(){var a,b,c,d,e,f,g,h,i,j,k=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};j=this.Tether.Utils,g=j.getOuterSize,f=j.getBounds,h=j.getSize,d=j.extend,i=j.updateClasses,c=j.defer,b={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle"},a=["left","top","right","bottom"],e=function(b,c){var d,e,g,h,i,j,k;if("scrollParent"===c?c=b.scrollParent:"window"===c&&(c=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),c===document&&(c=c.documentElement),null!=c.nodeType)for(e=h=f(c),i=getComputedStyle(c),c=[e.left,e.top,h.width+e.left,h.height+e.top],d=j=0,k=a.length;k>j;d=++j)g=a[d],g=g[0].toUpperCase()+g.substr(1),"Top"===g||"Left"===g?c[d]+=parseFloat(i["border"+g+"Width"]):c[d]-=parseFloat(i["border"+g+"Width"]);return c},this.Tether.modules.push({position:function(b){var g,h,j,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba=this;if(H=b.top,s=b.left,C=b.targetAttachment,!this.options.constraints)return!0;for(z=function(b){var c,d,e,f;for(ba.removeClass(b),f=[],d=0,e=a.length;e>d;d++)c=a[d],f.push(ba.removeClass(""+b+"-"+c));return f},V=this.cache("element-bounds",function(){return f(ba.element)}),r=V.height,I=V.width,0===I&&0===r&&null!=this.lastSize&&(W=this.lastSize,I=W.width,r=W.height),E=this.cache("target-bounds",function(){return ba.getTargetBounds()}),D=E.height,F=E.width,B={},q={},h=[this.getClass("pinned"),this.getClass("out-of-bounds")],X=this.options.constraints,J=0,N=X.length;N>J;J++)p=X[J],p.outOfBoundsClass&&h.push(p.outOfBoundsClass),p.pinnedClass&&h.push(p.pinnedClass);for(K=0,O=h.length;O>K;K++)for(o=h[K],Y=["left","top","right","bottom"],L=0,P=Y.length;P>L;L++)A=Y[L],h.push(""+o+"-"+A);for(g=[],B=d({},C),q=d({},this.attachment),Z=this.options.constraints,M=0,Q=Z.length;Q>M;M++){if(p=Z[M],G=p.to,j=p.attachment,w=p.pin,null==j&&(j=""),k.call(j," ")>=0?($=j.split(" "),n=$[0],m=$[1]):m=n=j,l=e(this,G),("target"===n||"both"===n)&&(H<l[1]&&"top"===B.top&&(H+=D,B.top="bottom"),H+r>l[3]&&"bottom"===B.top&&(H-=D,B.top="top")),"together"===n&&(H<l[1]&&"top"===B.top&&("bottom"===q.top?(H+=D,B.top="bottom",H+=r,q.top="top"):"top"===q.top&&(H+=D,B.top="bottom",H-=r,q.top="bottom")),H+r>l[3]&&"bottom"===B.top&&("top"===q.top?(H-=D,B.top="top",H-=r,q.top="bottom"):"bottom"===q.top&&(H-=D,B.top="top",H+=r,q.top="top")),"middle"===B.top&&(H+r>l[3]&&"top"===q.top?(H-=r,q.top="bottom"):H<l[1]&&"bottom"===q.top&&(H+=r,q.top="top"))),("target"===m||"both"===m)&&(s<l[0]&&"left"===B.left&&(s+=F,B.left="right"),s+I>l[2]&&"right"===B.left&&(s-=F,B.left="left")),"together"===m&&(s<l[0]&&"left"===B.left?"right"===q.left?(s+=F,B.left="right",s+=I,q.left="left"):"left"===q.left&&(s+=F,B.left="right",s-=I,q.left="right"):s+I>l[2]&&"right"===B.left?"left"===q.left?(s-=F,B.left="left",s-=I,q.left="right"):"right"===q.left&&(s-=F,B.left="left",s+=I,q.left="left"):"center"===B.left&&(s+I>l[2]&&"left"===q.left?(s-=I,q.left="right"):s<l[0]&&"right"===q.left&&(s+=I,q.left="left"))),("element"===n||"both"===n)&&(H<l[1]&&"bottom"===q.top&&(H+=r,q.top="top"),H+r>l[3]&&"top"===q.top&&(H-=r,q.top="bottom")),("element"===m||"both"===m)&&(s<l[0]&&"right"===q.left&&(s+=I,q.left="left"),s+I>l[2]&&"left"===q.left&&(s-=I,q.left="right")),"string"==typeof w?w=function(){var a,b,c,d;for(c=w.split(","),d=[],b=0,a=c.length;a>b;b++)v=c[b],d.push(v.trim());return d}():w===!0&&(w=["top","left","right","bottom"]),w||(w=[]),x=[],t=[],H<l[1]&&(k.call(w,"top")>=0?(H=l[1],x.push("top")):t.push("top")),H+r>l[3]&&(k.call(w,"bottom")>=0?(H=l[3]-r,x.push("bottom")):t.push("bottom")),s<l[0]&&(k.call(w,"left")>=0?(s=l[0],x.push("left")):t.push("left")),s+I>l[2]&&(k.call(w,"right")>=0?(s=l[2]-I,x.push("right")):t.push("right")),x.length)for(y=null!=(_=this.options.pinnedClass)?_:this.getClass("pinned"),g.push(y),T=0,R=x.length;R>T;T++)A=x[T],g.push(""+y+"-"+A);if(t.length)for(u=null!=(aa=this.options.outOfBoundsClass)?aa:this.getClass("out-of-bounds"),g.push(u),U=0,S=t.length;S>U;U++)A=t[U],g.push(""+u+"-"+A);(k.call(x,"left")>=0||k.call(x,"right")>=0)&&(q.left=B.left=!1),(k.call(x,"top")>=0||k.call(x,"bottom")>=0)&&(q.top=B.top=!1),(B.top!==C.top||B.left!==C.left||q.top!==this.attachment.top||q.left!==this.attachment.left)&&this.updateAttachClasses(q,B)}return c(function(){return i(ba.target,g,h),i(ba.element,g,h)}),{top:H,left:s}}})}.call(this),function(){var a,b,c,d;d=this.Tether.Utils,b=d.getBounds,c=d.updateClasses,a=d.defer,this.Tether.modules.push({position:function(d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=this;if(o=d.top,j=d.left,y=this.cache("element-bounds",function(){return b(D.element)}),i=y.height,p=y.width,n=this.getTargetBounds(),h=o+i,k=j+p,e=[],o<=n.bottom&&h>=n.top)for(z=["left","right"],q=0,u=z.length;u>q;q++)l=z[q],((A=n[l])===j||A===k)&&e.push(l);if(j<=n.right&&k>=n.left)for(B=["top","bottom"],r=0,v=B.length;v>r;r++)l=B[r],((C=n[l])===o||C===h)&&e.push(l);for(g=[],f=[],m=["left","top","right","bottom"],g.push(this.getClass("abutted")),s=0,w=m.length;w>s;s++)l=m[s],g.push(""+this.getClass("abutted")+"-"+l);for(e.length&&f.push(this.getClass("abutted")),t=0,x=e.length;x>t;t++)l=e[t],f.push(""+this.getClass("abutted")+"-"+l);return a(function(){return c(D.target,f,g),c(D.element,f,g)}),!0}})}.call(this),function(){this.Tether.modules.push({position:function(a){var b,c,d,e,f,g,h;return g=a.top,b=a.left,this.options.shift?(c=function(a){return"function"==typeof a?a.call(this,{top:g,left:b}):a},d=c(this.options.shift),"string"==typeof d?(d=d.split(" "),d[1]||(d[1]=d[0]),f=d[0],e=d[1],f=parseFloat(f,10),e=parseFloat(e,10)):(h=[d.top,d.left],f=h[0],e=h[1]),g+=f,b+=e,{top:g,left:b}):void 0}})}.call(this),this.Tether}),function(){c.AttentionSpan=function(){function a(a){var b,c;this.options=null!=a?a:{},this._has_attention=!1,null==(b=this.options).wait_for_attention&&(b.wait_for_attention=0),null==(c=this.options).wait_for_neglection&&(c.wait_for_neglection=0)}return a.prototype.gainAttention=function(){return this.clearTimeout("losing_attention_timeout_handler"),null!=this.gaining_attention_timeout_handler?this.gaining_attention_timeout_handler:this.gaining_attention_timeout_handler=setTimeout(function(a){return function(){return a.gainAttentionNow()}}(this),this.options.wait_for_attention)},a.prototype.loseAttention=function(){return this.clearTimeout("gaining_attention_timeout_handler"),null!=this.losing_attention_timeout_handler?this.losing_attention_timeout_handler:this.losing_attention_timeout_handler=setTimeout(function(a){return function(){return a.loseAttentionNow()}}(this),this.options.wait_for_neglection)},a.prototype.has_attention=function(){return this._has_attention},a.prototype.loseAttentionNow=function(){var a;return this.clearTimeout("gaining_attention_timeout_handler"),this.clearTimeout("losing_attention_timeout_handler"),this._has_attention=!1,"function"==typeof(a=this.options).onAttentionLost?a.onAttentionLost():void 0},a.prototype.gainAttentionNow=function(){var a;return this.clearTimeout("gaining_attention_timeout_handler"),this.clearTimeout("losing_attention_timeout_handler"),this._has_attention=!0,"function"==typeof(a=this.options).onAttentionGained?a.onAttentionGained():void 0},a.prototype.clearTimeout=function(a){return clearTimeout(this[a]),delete this[a]},a.prototype.destroy=function(){return this.clearTimeout("gaining_attention_timeout_handler"),this.clearTimeout("losing_attention_timeout_handler")},a}()}.call(this),function(){var b;c.$factlinkCoreContainer=a("<factlink-core-container></factlink-core-container>"),a("body").append(c.$factlinkCoreContainer),b="mouseup mousedown click mouseenter mouseleave mousemove mouseout mouseover dblclick\nshow contextmenu\ndrag dragstart dragenter dragover dragleave dragend drop\ntouchstart touchmove touchleave touchenter touchend touchcancel",c.$factlinkCoreContainer.on(b,function(a){return a.stopPropagation()})}.call(this),function(){var b,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}};d=document.createElement("a"),e=function(a){return d.href=a,d.host},b=function(){function b(b){this._targetElement=b.targetElement,this._targetOffset=b.targetOffset,this.$el=a("<factlink-icon-button>\n  <factlink-icon-button-bubble>\n    "+b.content+"\n    <factlink-icon-button-bubble-triangle></factlink-icon-button-bubble-triangle>\n  </factlink-icon-button-bubble>\n</factlink-icon-button>"),c.$factlinkCoreContainer.append(this.$el),this._setStyles(),this._robustHover=new c.RobustHover({$el:this.$el,mouseenter:b.onmouseenter,mouseleave:b.onmouseleave}),this.$el.on("click",b.onclick),this._tether=new c.Tether(this._tether_options())}return b.prototype.resetOffset=function(a){return a!==this._targetOffset?(this._targetOffset=a,this._tether.setOptions(this._tether_options())):void 0},b.prototype._tether_options=function(){return{element:this.$el[0],target:this._targetElement,attachment:"top left",targetAttachment:"top right",classPrefix:"factlink-tether",targetOffset:this._targetOffset||"0 0"}},b.prototype.destroy=function(){return this._tether.destroy(),this._robustHover.destroy(),this.$el.remove()},b.prototype.fadeIn=function(){return this.$el.addClass("factlink-control-visible")},b.prototype.fadeOut=function(){return this.$el.removeClass("factlink-control-visible")},b.prototype._setStyles=function(){var a,b,c,d,e,f,g;return d=window.getComputedStyle(this._targetElement),f=d.color,g=f.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(,\s*\d+(\.\d+)?)?\)$/),c=g[1]/255,b=g[2]/255,a=g[3]/255,e=.2126*c*c+.7152*b*b+.0722*a*a,this.$el.css({"line-height":d.lineHeight,"font-size":d.fontSize,"font-family":d.fontFamily}),this.$el.find("factlink-icon-button-bubble").css({"background-color":f,color:e>.5?"black":"white","font-size":Math.max(12,Math.min(16,Math.round(.8*parseInt(d.fontSize))))}),this.$el.find("factlink-icon-button-bubble-triangle").css({"border-top-color":f}),this.$el.css(this._siteSpecificStyles())},b.prototype._siteSpecificStyles=function(){switch(e(window.location.href)){case"medium.com":return{"margin-left":"2em"};default:return{}}},b}(),c.ParagraphIconButtonContainer=function(){function d(d,e){this._onHideAllParagraphButtons=f(this._onHideAllParagraphButtons,this),this._showOnlyThisParagraphButton=f(this._showOnlyThisParagraphButton,this),this.$paragraph=a(d),this._iconButton=new b({content:"+",targetElement:this.$paragraph[0],onmouseenter:function(a){return function(){var b;return null!=(b=a._attentionSpan)?b.gainAttention():void 0}}(this),onmouseleave:function(a){return function(){var b;return null!=(b=a._attentionSpan)?b.loseAttention():void 0}}(this),onclick:e}),this._attentionSpan=new c.AttentionSpan({wait_for_neglection:500,onAttentionGained:function(a){return function(){return a._iconButton.fadeIn()}}(this),onAttentionLost:function(a){return function(){return a._iconButton.fadeOut()}}(this)}),this._robustParagraphHover=new c.RobustHover({$el:this.$paragraph,mouseenter:this._showOnlyThisParagraphButton,mouseleave:function(a){return function(){return a._attentionSpan.loseAttention()}}(this)}),a(document).on("hideAllParagraphButtons",this._onHideAllParagraphButtons)}return d.prototype._showOnlyThisParagraphButton=function(){return a(document).trigger("hideAllParagraphButtons"),this._attentionSpan.gainAttention()},d.prototype._onHideAllParagraphButtons=function(){return this._attentionSpan.loseAttentionNow()},d.prototype.destroy=function(){var a,b;return this._iconButton.destroy(),null!=(a=this._attentionSpan)&&a.destroy(),null!=(b=this._robustParagraphHover)?b.destroy():void 0},d}()}.call(this),function(){a.fn.distinctDescendants=function(){var b,c;return b=[],a(this).parentsUntil(function(){var c,d;return c=a(this),d=c.data("$.fn.distinctDescendants.isParent"),c.data("$.fn.distinctDescendants.isParent",!0),b.push(c),d}),c=a(this).filter(function(){return!a(this).data("$.fn.distinctDescendants.isParent")}),b.forEach(function(a){return a.removeData("$.fn.distinctDescendants.isParent")}),a(c)}}.call(this),function(){c.ParagraphButtons=function(){function b(a){this._onClick=a}return b.prototype._paragraphHasContent=function(b){var c,d;return c=a(b).clone(),c.find("a").remove(),d=c.text().trim().replace(/\s\s+/g," ").length,c.remove(),d>=50},b.prototype._addParagraphButton=function(a){return this._paragraphHasContent(a)?new c.ParagraphIconButtonContainer(a,function(b){return function(){return b._onClick(a)}}(this)):void 0},b.prototype._addParagraphButtonsBatch=function(a){var b,c,d,e,f;for(f=a.slice(0,10),d=0,e=f.length;e>d;d++)b=f[d],this._addParagraphButton(b);return c=a.slice(10),c.length>0?setTimeout(function(a){return function(){return a._addParagraphButtonsBatch(c)}}(this),200):void 0},b.prototype._paragraphSelectors=function(){return["p","li","dd","dt",".paragraph",".para",".par",".text",".summary"]},b.prototype._prefixedParagraphSelectors=function(a){var b,c,d,e,f;for(d=this._paragraphSelectors(),e=[],b=0,c=d.length;c>b;b++)f=d[b],e.push(a+" "+f);return e},b.prototype._defaultSelector=function(){return this._paragraphSelectors().join(",")},b.prototype._articleContainerSelector=function(){var b,c,d,e,f;for(f=["article","div.article","div.story","div.single-post","div.post","div#bodyContent","div#content","div.content","div#main","div.main","div#page","div.page","div#site","div.site"],c=0,d=f.length;d>c;c++)if(e=f[c],b=a(e),1===b.length&&b.is(":visible"))return this._prefixedParagraphSelectors(e).join(",");return null},b.prototype._paragraphElements=function(){var b;return b=this._articleContainerSelector()||this._defaultSelector(),console.info("Paragraph selector:",b),a(b).distinctDescendants().filter(":visible")},b.prototype.addParagraphButtons=function(){return this._addParagraphButtonsBatch(this._paragraphElements())},b}()}.call(this),function(){window.paragraphUi=function(){return{start:function(a){var b;return b=new c.ParagraphButtons(function(b){return a.runHook("createFromParagraph",[b])}),b.addParagraphButtons()}}}}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};c.RobustHover=function(){function b(b){this._options=b,this._onMouseLeave=a(this._onMouseLeave,this),this._onMouseEnter=a(this._onMouseEnter,this),this._hovered=!1,this._options.$el.on("mousemove",this._onMouseEnter),this._options.$el.on("mouseleave",this._onMouseLeave)}return b.prototype.destroy=function(){var a;return this._options.$el.off("mousemove",this._onMouseEnter),this._options.$el.off("mouseleave",this._onMouseLeave),null!=(a=this._options.$externalDocument)?a.off("mousemove",this._onMouseLeave):void 0},b.prototype._onMouseEnter=function(){var a,b;if(!this._hovered)return null!=(b=this._options.$externalDocument)&&b.on("mousemove",this._onMouseLeave),this._hovered=!0,"function"==typeof(a=this._options).mouseenter?a.mouseenter():void 0},b.prototype._onMouseLeave=function(){var a,b;if(this._hovered)return null!=(b=this._options.$externalDocument)&&b.off("mousemove",this._onMouseLeave),this._hovered=!1,"function"==typeof(a=this._options).mouseleave?a.mouseleave():void 0},b}()}.call(this)}).call({},annotator.util.$);